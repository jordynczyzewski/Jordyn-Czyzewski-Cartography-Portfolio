"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92694,97897],{1801:(e,t,s)=>{s.d(t,{G:()=>i});let i="M15.167 13a.834.834 0 0 0 .833-.834V1.834A.834.834 0 0 0 15.167 1H.833A.834.834 0 0 0 0 1.833v10.334A.834.834 0 0 0 .833 13H6v1H5v1h6v-1h-1v-1zM1 2h14v10H1zm8 12H7v-1h2z"},55814:(e,t,s)=>{s.d(t,{e:()=>o,r:()=>r});var i=s(455729);let o=(0,i.createContext)({briefingDisplay:{currentIndex:0,totalNumberOfSlides:0,isStoryItemOutlineShowing:!1},updateBriefingDisplay:()=>{},setOnUpdateCurrentlyIndex:()=>null}),r=()=>(0,i.useContext)(o)},105559:(e,t,s)=>{s.d(t,{A:()=>m,g:()=>h});var i=s(406029),o=s(571711),r=s.n(o);s(455729);var a=s(332988),n=s.n(a),l=s(888782),p=s(108173),c=s(476011),d=s(469121);let h=e=>{let t=(0,l.st)(),s=e.trackingEventData?t.getDataAttributes(e.trackingEventData):{},o={styles:(0,i.jsx)(r(),{id:"fdb33912e95ade24",children:".media-toolbar-button.flipped.jsx-fdb33912e95ade24{transform:scale(-1,1)}"}),className:"jsx-fdb33912e95ade24"},a=(0,i.jsxs)(p.Ay,{type:e.type??"single-icon",id:e.buttonId,onClick:e.onClick,className:n()("media-toolbar-button",o.className,{flipped:e.shouldFlip}),disabled:e.disabled,visuallyHiddenLabel:e.tooltipContent,...s,"aria-pressed":e["aria-pressed"]&&!e.disabled,"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],onMouseLeave:e.onMouseLeave,testId:e.buttonId,children:[(0,i.jsx)(c.A,{...e.iconProps,size:16}),e.buttonTextContent,o.styles]});return(0,i.jsxs)(d.m_,{children:[(0,i.jsx)(d.k$,{autoARIADescribedByEnabled:!1,children:e.renderButton?.(a)??a}),(0,i.jsx)(d.ZI,{children:e.tooltipContent})]},e.buttonId)},m=h},113516:(e,t,s)=>{s.d(t,{N:()=>i});let i="M6.793 12l7-7h1.414l-7 7 7 7h-1.414z"},130595:(e,t,s)=>{s.d(t,{k:()=>i});let i="M8 14h3v1H4v-1h3v-4H1V2H0V1h15v1h-1v3h-1V2H2v7h7v1H8v4zm7.928-8.121l-.707-.707L13 7.292l-2.221-2.22-.707.707L12.292 8l-2.22 2.221.707.707L13 8.708l2.221 2.22.707-.707L13.708 8l2.22-2.121z"},179759:(e,t,s)=>{s.d(t,{BN:()=>n,Rq:()=>a,iO:()=>l});var i=s(406029),o=s(455729);let r=(0,o.createContext)({isExpanded:!1,updateIsExpanded:()=>void 0}),a=()=>(0,o.useContext)(r),n=({children:e})=>{let[t,s]=(0,o.useState)({}),a=(0,o.useCallback)((e,i)=>{if(e&&!t[i])s({...t,[i]:!0});else if(!e&&t[i]){let e={...t};delete e[i],s(e)}},[t]),n=(0,o.useMemo)(()=>({isExpanded:!!Object.values(t).length,updateIsExpanded:a}),[t,a]);return(0,i.jsx)(r.Provider,{value:n,children:e})},l=e=>class extends o.PureComponent{render(){return(0,i.jsx)(r.Consumer,{children:t=>(0,i.jsx)(e,{...this.props,mediaExpandedContext:t})})}}},224110:(e,t,s)=>{s.d(t,{R:()=>i});let i="M9.5 2h-6A1.502 1.502 0 0 0 2 3.5v6A1.502 1.502 0 0 0 3.5 11h6A1.502 1.502 0 0 0 11 9.5v-6A1.502 1.502 0 0 0 9.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 2h-6A1.502 1.502 0 0 0 13 3.5v6a1.502 1.502 0 0 0 1.5 1.5h6A1.502 1.502 0 0 0 22 9.5v-6A1.502 1.502 0 0 0 20.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM9.5 13h-6A1.502 1.502 0 0 0 2 14.5v6A1.502 1.502 0 0 0 3.5 22h6a1.502 1.502 0 0 0 1.5-1.5v-6A1.502 1.502 0 0 0 9.5 13zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 13h-6a1.502 1.502 0 0 0-1.5 1.5v6a1.502 1.502 0 0 0 1.5 1.5h6a1.502 1.502 0 0 0 1.5-1.5v-6a1.502 1.502 0 0 0-1.5-1.5zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5z"},240953:(e,t,s)=>{s.d(t,{U:()=>i});let i="M8.793 5h1.414l7 7-7 7H8.793l7-7z"},306369:(e,t,s)=>{s.d(t,{e:()=>i});let i="M4 1.571V14.43L14 8zm1 1.832l7.15 4.598L5 12.597z"},350041:(e,t,s)=>{s.d(t,{o:()=>i});let i="M12 16a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1zM5 1h7v1H5zm0 2h7v9H5zm0 10h7v2H9v-1H8v1H5z"},356202:(e,t,s)=>{s.d(t,{R:()=>i});let i="M6 1.773l15 10.23L6 22.226z"},415997:(e,t,s)=>{s.d(t,{M:()=>i});let i="M5 9H1.833A.834.834 0 0 1 1 8.167V1.833A.834.834 0 0 1 1.833 1h6.334A.834.834 0 0 1 9 1.833V5h1V1.833A1.835 1.835 0 0 0 8.167 0H1.833A1.835 1.835 0 0 0 0 1.833v6.334A1.835 1.835 0 0 0 1.833 10H5zm1.733-3.956A6.467 6.467 0 0 0 7.179 4H8V3H5.519l.128-.129L4.59 1.813l-.707.707.48.48H2v1h.768a6.176 6.176 0 0 0 1.418 2.414 5.84 5.84 0 0 1-1.79.768l.242.97A6.723 6.723 0 0 0 4.97 7.086c.011.008.025.014.036.022a2.167 2.167 0 0 1 1.727-2.064zM3.83 4h2.284a5.056 5.056 0 0 1-1.148 1.777A4.957 4.957 0 0 1 3.83 4zm10.362 12H7.808A1.81 1.81 0 0 1 6 14.192V7.808A1.81 1.81 0 0 1 7.808 6h6.384A1.81 1.81 0 0 1 16 7.808v6.384A1.81 1.81 0 0 1 14.192 16zM7.808 7A.809.809 0 0 0 7 7.808v6.384a.809.809 0 0 0 .808.808h6.384a.809.809 0 0 0 .808-.808V7.808A.809.809 0 0 0 14.192 7zm5.342 6.94l.899-.439L11 7.261l-3.049 6.24.899.44.46-.941h3.38zM9.798 12L11 9.54 12.202 12z"},416682:(e,t,s)=>{s.d(t,{G0:()=>a,Gp:()=>l,Q$:()=>h,RO:()=>o,ak:()=>u,d1:()=>m,eh:()=>p,fo:()=>y,p4:()=>g,pV:()=>d,t0:()=>n,tu:()=>i,uL:()=>r,wo:()=>c});let i="item-end-reached",o="stop-scrolling-item",r="autoplay-next-item",a="toggle-item-autoplay",n="toggle-item-speed",l="reset-item",p="iframe-ready-for-communication",c="enable-item-autoplay",d="disable-item-autoplay",h="update-parent-pause",m="active-item-iframe",y=1500,u=1e3,g={slow:{displaySpeed:"1/2x",pageScrollDelay:40,collectionAutoplayDuration:12e4,briefingAutoplayDuration:6e4},medium:{displaySpeed:"1x",pageScrollDelay:20,collectionAutoplayDuration:6e4,briefingAutoplayDuration:3e4},fast:{displaySpeed:"2x",pageScrollDelay:10,collectionAutoplayDuration:3e4,briefingAutoplayDuration:15e3}}},494913:(e,t,s)=>{s.d(t,{j:()=>a});var i=s(199065),o=s(400014),r=s(131594);let a=({itemType:e,dataPreparer:t,privilegesChecker:s})=>async(a,n)=>{let{id:l}=a.query,{authManager:p,config:c,signInUrl:d,storyMapUserPrivileges:h}=n,m=s?.(h);if(m)throw m;if("string"!=typeof l||!(0,o.D)(l))throw new i.D({type:"story-inaccessible",itemType:e});return await t({ctx:a,id:l,config:c,authManager:p,signInUrl:d,itemType:e,shouldRedirect:!0,convertRoute:r.N})}},515401:(e,t,s)=>{s.d(t,{a:()=>i});let i="M22.766 13.875c.063.058.128.11.189.17l5 5a6.3 6.3 0 0 1-8.91 8.91l-5-5a6.286 6.286 0 0 1 2.969-10.568 3.279 3.279 0 0 1 .553.905 5.288 5.288 0 0 0-2.815 8.956l5 5a5.3 5.3 0 0 0 7.496-7.496l-4.488-4.488a8.366 8.366 0 0 0 .006-1.389zm-12.526 3.86l-4.488-4.487a5.3 5.3 0 0 1 7.496-7.496l5 5a5.288 5.288 0 0 1-2.815 8.956 3.278 3.278 0 0 0 .553.905 6.287 6.287 0 0 0 2.969-10.568l-5-5a6.3 6.3 0 0 0-8.91 8.91l5 5c.061.06.126.112.189.17a8.367 8.367 0 0 1 .006-1.39z"},586615:(e,t,s)=>{let i;s.d(t,{A:()=>tt});var o=s(406029),r=s(571711),a=s.n(r),n=s(455729),l=s(390248),p=s(639151),c=s(332988),d=s.n(c),h=s(795669),m=s.n(h),y=s(395597),u=s(641587),g=s(882453),x=s(126898),A=s(531977),f=s(285924),w=s(652225),v=s(619978),b=s(724875),I=s(95206),S=s(757808),T=s(695505),D=s(240300),j=s(671012),k=s(364537),C=s(640716),L=s(131383),M=s(816216),_=s(771543);let $=["action-button","briefing","briefing-slide","briefing-slide-content-pane","briefing-ui","collection","collection-ui","collection-cover","collection-nav","collection-item","collection-map","attribution","frame","frame-timeline","frame-custom","frame-journey","frame-narrative-panel","frame-slide","immersive-narrative-panel","immersive-slide","journey-map","journey-place","navigation","outline","story","timeline-event","timeline-spacer","tour-map","tour-place"];var E=s(536335),P=s(951268),z=s(100392),B=s(476011),R=s(35068);let H=e=>{let t=(0,R.A)(),{theme:s}=(0,y.df)(),i=(0,w.Ye)();return(0,o.jsxs)("div",{className:a().dynamic([["eaec5c323ccebb48",[g.Ay.spacing.sm,P.Ay.shadow.sm(),P.Ay.overflowWrap(),g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.color.white,g.Ay.spacing.xs,g.Ay.spacing.xxs,P.Ay.typography.subtitleSmall(),g.Ay.color.darkGreen,g.Ay.spacing.xxxs,g.Ay.spacing.xs,g.Ay.spacing.md,P.Ay.typography.bodySmall(),g.Ay.color.cadet,g.Ay.spacing.xs,g.Ay.spacing.xs,g.Ay.spacing.xxs,s.colors.labelLink,P.Ay.typography.bodyLarge(),g.Ay.spacing.xxxxs,g.Ay.spacing.xxxxs,g.Ay.spacing.xxxs,x.Gs.RTL,g.Ay.spacing.xxxxs,g.Ay.responsiveBreakpoints.large,g.Ay.responsiveBreakpoints.extraLarge]]])+" container",children:[(0,o.jsx)("h3",{className:a().dynamic([["eaec5c323ccebb48",[g.Ay.spacing.sm,P.Ay.shadow.sm(),P.Ay.overflowWrap(),g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.color.white,g.Ay.spacing.xs,g.Ay.spacing.xxs,P.Ay.typography.subtitleSmall(),g.Ay.color.darkGreen,g.Ay.spacing.xxxs,g.Ay.spacing.xs,g.Ay.spacing.md,P.Ay.typography.bodySmall(),g.Ay.color.cadet,g.Ay.spacing.xs,g.Ay.spacing.xs,g.Ay.spacing.xxs,s.colors.labelLink,P.Ay.typography.bodyLarge(),g.Ay.spacing.xxxxs,g.Ay.spacing.xxxxs,g.Ay.spacing.xxxs,x.Gs.RTL,g.Ay.spacing.xxxxs,g.Ay.responsiveBreakpoints.large,g.Ay.responsiveBreakpoints.extraLarge]]])+" title",children:t("component.builderHeader.storySettings.analytics.message.title")}),(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:e.message},className:a().dynamic([["eaec5c323ccebb48",[g.Ay.spacing.sm,P.Ay.shadow.sm(),P.Ay.overflowWrap(),g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.color.white,g.Ay.spacing.xs,g.Ay.spacing.xxs,P.Ay.typography.subtitleSmall(),g.Ay.color.darkGreen,g.Ay.spacing.xxxs,g.Ay.spacing.xs,g.Ay.spacing.md,P.Ay.typography.bodySmall(),g.Ay.color.cadet,g.Ay.spacing.xs,g.Ay.spacing.xs,g.Ay.spacing.xxs,s.colors.labelLink,P.Ay.typography.bodyLarge(),g.Ay.spacing.xxxxs,g.Ay.spacing.xxxxs,g.Ay.spacing.xxxs,x.Gs.RTL,g.Ay.spacing.xxxxs,g.Ay.responsiveBreakpoints.large,g.Ay.responsiveBreakpoints.extraLarge]]])+" message-container"}),(0,o.jsx)(z.A,{primaryButtonTitle:t("component.builderHeader.storySettings.analytics.message.button.allow"),onPrimaryButtonClick:e.onAllowClicked,orientation:i.isViewportMinWidth("medium")?"horizontal":"vertical",startContent:(0,o.jsx)("h4",{className:a().dynamic([["eaec5c323ccebb48",[g.Ay.spacing.sm,P.Ay.shadow.sm(),P.Ay.overflowWrap(),g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.color.white,g.Ay.spacing.xs,g.Ay.spacing.xxs,P.Ay.typography.subtitleSmall(),g.Ay.color.darkGreen,g.Ay.spacing.xxxs,g.Ay.spacing.xs,g.Ay.spacing.md,P.Ay.typography.bodySmall(),g.Ay.color.cadet,g.Ay.spacing.xs,g.Ay.spacing.xs,g.Ay.spacing.xxs,s.colors.labelLink,P.Ay.typography.bodyLarge(),g.Ay.spacing.xxxxs,g.Ay.spacing.xxxxs,g.Ay.spacing.xxxs,x.Gs.RTL,g.Ay.spacing.xxxxs,g.Ay.responsiveBreakpoints.large,g.Ay.responsiveBreakpoints.extraLarge]]])+" footer-label",children:t("component.builderHeader.storySettings.analytics.message.allowTracking")})}),(0,o.jsx)("button",{"aria-label":t("common.close"),onClick:e.onDismissClicked,className:a().dynamic([["eaec5c323ccebb48",[g.Ay.spacing.sm,P.Ay.shadow.sm(),P.Ay.overflowWrap(),g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.color.white,g.Ay.spacing.xs,g.Ay.spacing.xxs,P.Ay.typography.subtitleSmall(),g.Ay.color.darkGreen,g.Ay.spacing.xxxs,g.Ay.spacing.xs,g.Ay.spacing.md,P.Ay.typography.bodySmall(),g.Ay.color.cadet,g.Ay.spacing.xs,g.Ay.spacing.xs,g.Ay.spacing.xxs,s.colors.labelLink,P.Ay.typography.bodyLarge(),g.Ay.spacing.xxxxs,g.Ay.spacing.xxxxs,g.Ay.spacing.xxxs,x.Gs.RTL,g.Ay.spacing.xxxxs,g.Ay.responsiveBreakpoints.large,g.Ay.responsiveBreakpoints.extraLarge]]])+" close-button",children:(0,o.jsx)(B.A,{path:E.s,size:16,fill:s.colors.labelPrimary})}),(0,o.jsx)(a(),{id:"eaec5c323ccebb48",dynamic:[g.Ay.spacing.sm,P.Ay.shadow.sm(),P.Ay.overflowWrap(),g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.spacing.xxs,g.Ay.color.white,g.Ay.spacing.xs,g.Ay.spacing.xxs,P.Ay.typography.subtitleSmall(),g.Ay.color.darkGreen,g.Ay.spacing.xxxs,g.Ay.spacing.xs,g.Ay.spacing.md,P.Ay.typography.bodySmall(),g.Ay.color.cadet,g.Ay.spacing.xs,g.Ay.spacing.xs,g.Ay.spacing.xxs,s.colors.labelLink,P.Ay.typography.bodyLarge(),g.Ay.spacing.xxxxs,g.Ay.spacing.xxxxs,g.Ay.spacing.xxxs,x.Gs.RTL,g.Ay.spacing.xxxxs,g.Ay.responsiveBreakpoints.large,g.Ay.responsiveBreakpoints.extraLarge],children:`.container.__jsx-style-dynamic-selector{--space-from-bottom:${g.Ay.spacing.sm};${P.Ay.shadow.sm()}
          ${P.Ay.overflowWrap()}
          position: fixed;z-index:9999;bottom:var(--space-from-bottom);left:50%;transform:translatex(-50%);width:100%;max-width:calc(100% - ${g.Ay.spacing.xxs} - ${g.Ay.spacing.xxs});max-height:calc(100vh - var(--space-from-bottom) - ${g.Ay.spacing.xxs});display:flex;flex-direction:column;background-color:${g.Ay.color.white};padding:${g.Ay.spacing.xs} 0 ${g.Ay.spacing.xxs}}.title.__jsx-style-dynamic-selector{${P.Ay.typography.subtitleSmall()}
          color: ${g.Ay.color.darkGreen};margin-bottom:${g.Ay.spacing.xxxs};padding-inline-start:${g.Ay.spacing.xs};padding-inline-end:${g.Ay.spacing.md}}.message-container.__jsx-style-dynamic-selector{${P.Ay.typography.bodySmall()}
          overflow-y: auto;color:${g.Ay.color.cadet};padding-inline-start:${g.Ay.spacing.xs};padding-inline-end:${g.Ay.spacing.xs};padding-bottom:${g.Ay.spacing.xxs}}.message-container.__jsx-style-dynamic-selector a,.message-container.__jsx-style-dynamic-selector a:visited{color:${s.colors.labelLink}}.footer-label.__jsx-style-dynamic-selector{${P.Ay.typography.bodyLarge()}}.close-button.__jsx-style-dynamic-selector{position:absolute;top:${g.Ay.spacing.xxxxs};right:${g.Ay.spacing.xxxxs};padding:${g.Ay.spacing.xxxs};line-height:0}${x.Gs.RTL} .close-button.__jsx-style-dynamic-selector{right:unset;left:${g.Ay.spacing.xxxxs}}@media(min-width:${g.Ay.responsiveBreakpoints.large}){.container.__jsx-style-dynamic-selector{width:75%;max-width:${g.Ay.responsiveBreakpoints.extraLarge}}}`})]})};var N=s(405280),O=s(948408),U=s(337139),V=s(257422),W=s(539423),F=s(892810),G=s(992823),q=s(794958),K=s(871497),Z=s(179759),Y=s(852701),J=s(183581),Q=s(510108),X=s(25706),ee=s(978434),et=s(951358),es=s(531887),ei=s(814995),eo=s(55814),er=s(22836),ea=s(698769),en=s(356202),el=s(108173);let ep={"1/2x":"M15 23H8.1v-.5c0-2.157 1.762-3.105 3.316-3.942 1.392-.748 2.593-1.394 2.593-2.721 0-1.046-1.184-1.837-2.47-1.855a2.38 2.38 0 0 0-2.001.72A2.118 2.118 0 0 0 8.973 16h-.97a2.954 2.954 0 0 1 .823-2 3.437 3.437 0 0 1 2.727-1c1.828 0 3.438 1.245 3.438 2.837 0 1.924-1.639 2.815-3.1 3.602-1.273.685-2.482 1.335-2.74 2.561H15zM11 3.422l-.916-.4-8.077 18.57.916.4zM4 2.207L1.011 3.634l.43.903L3 3.793v8.167h1zM22.689 9L20.5 11.696 18.311 9h-1.306l2.842 3.5-2.842 3.5h1.306l2.189-2.696L22.689 16h1.306l-2.842-3.5L23.995 9z","1x":"M9 21H8V4.743L4.804 6l-.377-.882L9 3.257zm9.689-12L16.5 11.696 14.311 9h-1.306l2.842 3.5-2.842 3.5h1.306l2.189-2.696L18.689 16h1.306l-2.842-3.5L19.995 9z","2x":"M13 20H2.004v-.5c0-3.497 2.885-5.076 5.43-6.469 2.352-1.287 4.575-2.504 4.575-5.007a4.172 4.172 0 0 0-4.173-4.038A4.693 4.693 0 0 0 4.31 5.304a5.604 5.604 0 0 0-1.315 3.685l-.989.005A6.475 6.475 0 0 1 3.59 4.611a5.63 5.63 0 0 1 4.246-1.598A5.155 5.155 0 0 1 13 8.024c0 3.096-2.581 4.514-5.086 5.884-2.376 1.3-4.627 2.532-4.886 5.092H13zm8.689-11L19.5 11.696 17.311 9h-1.306l2.842 3.5-2.842 3.5h1.306l2.189-2.696L21.689 16h1.306l-2.842-3.5L22.995 9z"};class ec extends n.PureComponent{constructor(e){super(e),this.setHoverState=()=>{this.state.isHovering||this.setState({isShowing:!0,isHovering:!0})},this.removeHoverState=()=>{this.state.isHovering&&this.setState({isHovering:!1})},this.state={isShowing:this.props.isShowing,isHovering:!1}}componentDidUpdate(){this.props.isShowing===this.state.isShowing||this.state.isHovering||this.setState({isShowing:this.props.isShowing})}render(){let e=this.state.isShowing?"visible":"hidden",t=this.props.intl.formatMessage({id:"component.autoplay.returnToTop"}),s=this.props.intl.formatMessage({id:"common.autoplay.play"}),i=this.props.intl.formatMessage({id:"common.autoplay.pause"}),r=this.props.intl.formatMessage({id:"component.autoplay.toggleSpeed"});return(0,o.jsxs)("div",{onMouseEnter:this.setHoverState,onMouseLeave:this.removeHoverState,className:a().dynamic([["48a63508cbc54d03",[this.props.appOffset.bottom,g.Ay.spacing.xxl,g.Ay.spacing.xxxxs,P.Ay.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85),e,+!!this.state.isShowing,g.Ay.spacing.xs,g.Ay.spacing.md,P.Ay.gapped({direction:"horizontal",gap:g.Ay.spacing.xs,alignItems:"center",justifyContent:"center"})]]])+" autoplay",children:[(0,o.jsxs)("div",{className:a().dynamic([["48a63508cbc54d03",[this.props.appOffset.bottom,g.Ay.spacing.xxl,g.Ay.spacing.xxxxs,P.Ay.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85),e,+!!this.state.isShowing,g.Ay.spacing.xs,g.Ay.spacing.md,P.Ay.gapped({direction:"horizontal",gap:g.Ay.spacing.xs,alignItems:"center",justifyContent:"center"})]]])+" autoplay-controls-wrapper",children:[(0,o.jsx)(el.Ay,{type:"single-icon",onClick:this.props.onResetClick,visuallyHiddenLabel:t,children:(0,o.jsx)(B.A,{path:ea.M})}),this.props.isPlaying?(0,o.jsx)(el.Ay,{type:"single-icon",onClick:this.props.onPlayToggle,visuallyHiddenLabel:i,children:(0,o.jsx)(B.A,{path:"M4 2h6v20H4zm10 20h6V2h-6z"})}):(0,o.jsx)(el.Ay,{type:"single-icon",onClick:this.props.onPlayToggle,visuallyHiddenLabel:s,children:(0,o.jsx)(B.A,{path:en.R})}),(0,o.jsx)(el.Ay,{type:"single-icon",onClick:this.props.onSpeedToggle,visuallyHiddenLabel:r,children:(0,o.jsx)(B.A,{path:ep[this.props.speed]})})]}),(0,o.jsx)(a(),{id:"48a63508cbc54d03",dynamic:[this.props.appOffset.bottom,g.Ay.spacing.xxl,g.Ay.spacing.xxxxs,P.Ay.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85),e,+!!this.state.isShowing,g.Ay.spacing.xs,g.Ay.spacing.md,P.Ay.gapped({direction:"horizontal",gap:g.Ay.spacing.xs,alignItems:"center",justifyContent:"center"})],children:`.autoplay.__jsx-style-dynamic-selector{position:fixed;left:50%;transform:translatex(-50%);bottom:calc(${this.props.appOffset.bottom} + ${g.Ay.spacing.xxl});border-radius:${g.Ay.spacing.xxxxs};background-color:${P.Ay.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85)};z-index:10;visibility:${e};opacity:${+!!this.state.isShowing};transition:opacity.5s linear,visibility.5s linear;padding:${g.Ay.spacing.xs} ${g.Ay.spacing.md}}.autoplay-controls-wrapper.__jsx-style-dynamic-selector{${P.Ay.gapped({direction:"horizontal",gap:g.Ay.spacing.xs,alignItems:"center",justifyContent:"center"})}}`})]})}}let ed=(0,y.NV)((0,F.Cm)((0,p.Ay)(ec)));var eh=s(416682);class em extends n.PureComponent{constructor(e){super(e),this.lastMouseMoveTime=0,this.lastScrollTime=0,this.isReaderScrolling=!1,this.autoplayNode=(0,n.createRef)(),this.autoplayEnabledSetup=async()=>{this.shouldToggleAutoPlayControls()&&this.toggleAutoplay(),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("wheel",this.handleWindowScroll),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("touchstart",this.handleMouseDown),this.interactionTimer=window.setInterval(this.interactionDelayCheck,500),this.props.collectionBlock&&(await this.props.collectionBlock?.do("switchToCurrentActiveItem"),this.autoplayCollectionItem()),this.props.storyItem.type===b.z.Briefing&&this.autoplayBriefingSlide()},this.autoplayDisabledCleanup=()=>{clearInterval(this.interactionTimer),clearInterval(this.scrollTimer),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("wheel",this.handleWindowScroll),window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("touchstart",this.handleMouseDown),clearTimeout(this.collectionTimeoutId),clearTimeout(this.briefingTimeoutId),this.postMessageToActiveItemIframe(eh.pV)},this.onReceiveMessage=e=>{e.origin===window.location.origin&&((0,S.nq)()?(e.data.method===eh.RO&&window.parent.postMessage({method:eh.uL},window.location.origin),e.data.method===eh.wo&&e.data.speed&&(this.props.enableAutoplay(),this.props.updateAutoplaySpeed(e.data.speed),this.props.isAutoplayPaused&&this.toggleAutoplay()),e.data.method===eh.pV&&(this.props.disableAutoplay(),this.props.isAutoplayPaused||this.toggleAutoplay()),e.data.method===eh.G0&&this.toggleAutoplay(),e.data.method===eh.t0&&e.data.speed&&this.props.updateAutoplaySpeed(e.data.speed),e.data.method===eh.Gp&&(this.props.onItemEndReached?.(),this.props.updateIsAutoplayPaused(!1),this.scrollPage())):(this.props.isAutoplayEnabled&&e.data.method===eh.eh&&e.source?.postMessage({method:eh.wo,speed:this.props.autoplaySpeed}),e.data.method===eh.tu&&e.source?.postMessage({method:eh.RO}),e.data.method===eh.uL&&this.switchToNextItem(),e.data.method===eh.Q$&&"boolean"==typeof e.data.isPaused&&this.props.isAutoplayPaused!==e.data.isPaused&&this.props.updateIsAutoplayPaused(e.data.isPaused)))},this.shouldToggleAutoPlayControls=()=>!(0,S.nq)()||(0,S.nq)()&&(0,S.Fj)(),this.switchToNextItem=async e=>{await this.props.collectionBlock?.do("switchToNextItem",e),this.autoplayCollectionItem()},this.switchToFirstCollectionItem=()=>{this.switchToNextItem(0)},this.autoplayCollectionItem=()=>{clearTimeout(this.collectionTimeoutId);let e=eh.p4[this.props.autoplaySpeed].collectionAutoplayDuration;this.collectionTimeoutId=setTimeout(()=>{let e=this.props.collectionBlock?.do("getActiveItemBlock");if(!e)return;let t=e.do("isStoryMap"),s=e.do("getBlockItemType"),i=e.do("getItemUrl"),o=i?.startsWith(window?.origin);("embed"!==s||!o)&&(t&&o||this.switchToNextItem())},e)},this.postMessageToActiveItemIframe=(e,t)=>{let s=document.querySelector(`.${eh.d1}`)?.contentWindow;s?.postMessage({method:e,...t})},this.autoplayBriefingSlide=(e=!1)=>{let t=eh.p4[this.props.autoplaySpeed].briefingAutoplayDuration,s=this.props.briefingDisplay.totalNumberOfSlides,i=this.props.briefingDisplay.currentIndex,o=i===s-1,r=i+1;if(clearTimeout(this.briefingTimeoutId),e)return void this.props.updateBriefingDisplay({currentIndex:0});this.briefingTimeoutId=setTimeout(()=>{if(o)return this.jumpToTop();this.props.updateBriefingDisplay({currentIndex:r})},t)},this.toggleAutoplay=e=>{let t=!this.props.isAutoplayPaused;e?.preventDefault(),this.props.updateIsAutoplayPaused(t),this.props.collectionBlock?(this.postMessageToActiveItemIframe(eh.G0),t?clearTimeout(this.collectionTimeoutId):this.autoplayCollectionItem()):this.props.storyItem.type===b.z.Briefing?t?clearTimeout(this.briefingTimeoutId):this.autoplayBriefingSlide():(window.parent.postMessage({method:eh.Q$,isPaused:t}),this.scrollPage())},this.handleWindowScroll=e=>{(e.deltaY>0||e.deltaY<0)&&(this.updateScrollTime(),this.isReaderScrolling=!0,this.props.isAutoplayPaused||(this.props.updateIsAutoplayPaused(!0),clearTimeout(this.collectionTimeoutId),clearTimeout(this.briefingTimeoutId),this.postMessageToActiveItemIframe(eh.G0)))},this.handleMouseDown=e=>{this.props.isAutoplayPaused||this.autoplayNode.current?.contains(e.target)||(this.props.updateIsAutoplayPaused(!0),clearInterval(this.scrollTimer),clearTimeout(this.collectionTimeoutId),clearTimeout(this.briefingTimeoutId),this.postMessageToActiveItemIframe(eh.G0))},this.updateScrollTime=()=>{this.lastScrollTime=Date.now()},this.handleMouseMove=()=>{this.lastMouseMoveTime=Date.now(),this.setState({areAutoplayControlsShowing:!0})},this.interactionDelayCheck=()=>{if(!this.autoplayNode.current)return void clearInterval(this.interactionTimer);this.isReaderScrolling?this.onReaderScrolling():this.onReaderNotScrolling()},this.onReaderScrolling=()=>{Date.now()>this.lastScrollTime+eh.ak?this.isReaderScrolling=!1:this.setState({areAutoplayControlsShowing:!0})},this.onReaderNotScrolling=()=>{Date.now()>this.lastMouseMoveTime+eh.fo&&!this.props.isAutoplayPaused?this.setState({areAutoplayControlsShowing:!1}):this.setState({areAutoplayControlsShowing:!0})},this.toggleAutoplaySpeed=()=>{"fast"===this.props.autoplaySpeed?this.props.updateAutoplaySpeed("slow"):"slow"===this.props.autoplaySpeed?this.props.updateAutoplaySpeed("medium"):this.props.updateAutoplaySpeed("fast")},this.onResetClick=()=>{this.props.collectionBlock?(clearTimeout(this.collectionTimeoutId),this.switchToFirstCollectionItem(),this.postMessageToActiveItemIframe(eh.Gp),this.props.updateIsAutoplayPaused(!1)):this.props.storyItem.type===b.z.Briefing?(this.autoplayBriefingSlide(!0),this.props.updateIsAutoplayPaused(!1)):this.jumpToTop()},this.jumpToTop=()=>{this.props.onItemEndReached?.(),window.parent.postMessage({method:eh.tu},window.location.origin),this.props.updateIsAutoplayPaused(!1),this.scrollPage()},this.scrollPage=()=>{let e=eh.p4[this.props.autoplaySpeed].pageScrollDelay;clearInterval(this.scrollTimer),this.scrollTimer=window.setInterval(()=>{if(this.props.isAutoplayPaused||!this.autoplayNode.current)return void clearInterval(this.scrollTimer);0===window.scrollY?(clearInterval(this.scrollTimer),setTimeout(()=>{window.scrollBy(0,2),this.scrollPage()},2e3)):Math.round(window.innerHeight+window.scrollY)>=document.body.offsetHeight?(clearInterval(this.scrollTimer),setTimeout(this.jumpToTop,3e3)):window.scrollBy(0,2)},e)},this.state={areAutoplayControlsShowing:!1}}componentDidMount(){window.addEventListener("message",this.onReceiveMessage,!1),(0,S.nq)()&&window.parent.postMessage({method:eh.eh},window.location.origin)}componentDidUpdate(e,t){e.autoplaySpeed!==this.props.autoplaySpeed&&(this.scrollPage(),this.postMessageToActiveItemIframe(eh.t0,{speed:this.props.autoplaySpeed}),this.autoplayBriefingSlide()),!e.isAutoplayEnabled&&this.props.isAutoplayEnabled&&this.autoplayEnabledSetup(),e.isAutoplayEnabled&&!this.props.isAutoplayEnabled&&this.autoplayDisabledCleanup(),(0,S.nq)()&&!this.props.isAutoplayEnabled&&window.parent.postMessage({method:eh.eh},window.location.origin);let s=this.props.collectionDisplay.isCoverShowing;!e.collectionDisplay.isCoverShowing&&s&&this.props.isAutoplayEnabled&&this.props.disableAutoplay(),this.props.isAutoplayEnabled&&!this.props.isAutoplayPaused&&this.props.storyItem.type===b.z.Briefing&&this.props.briefingDisplay.currentIndex!==e.briefingDisplay.currentIndex&&this.autoplayBriefingSlide()}componentWillUnmount(){window.removeEventListener("message",this.onReceiveMessage,!1),this.autoplayDisabledCleanup()}render(){return this.props.isAutoplayEnabled?(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(es.A,{triggerKey:" ",on:this.toggleAutoplay}),!this.props.isAutoplayPaused&&(0,o.jsx)(ei.A,{isShowing:!0,isInvisible:!0}),(0,o.jsx)("div",{ref:this.autoplayNode,children:(0,o.jsx)(ed,{isShowing:this.shouldToggleAutoPlayControls()&&this.state.areAutoplayControlsShowing,speed:eh.p4[this.props.autoplaySpeed].displaySpeed,isPlaying:!this.props.isAutoplayPaused,onResetClick:this.onResetClick,onPlayToggle:this.toggleAutoplay,onSpeedToggle:this.toggleAutoplaySpeed})})]}):null}}let ey=(0,er.A)((i=(0,q.B)((0,et.Lr)(em)),class extends n.PureComponent{render(){return(0,o.jsx)(eo.e.Consumer,{children:e=>(0,o.jsx)(i,{...this.props,...e})})}}));var eu=s(647687),eg=s.n(eu),ex=s(360587),eA=s(851843),ef=s(581695),ew=s(899110),ev=s(412359),eb=s(244835);let eI=(0,n.forwardRef)(({className:e},t)=>{let{foregroundColor:s}=(e=>{let t=(0,U.cu)(),s=(0,y.df)().theme;return{currentWebsiteThemeColors:s.colors,currentThemeVariables:t,...(0,eb.G)({themeVariables:t,websiteTheme:s,flavor:e})}})(b.z.Briefing),{theme:i,productVariables:r}=(0,y.df)(),{isExpanded:n}=(0,Z.Rq)(),{openMode:l}=(0,ew.EN)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("header",{ref:t,...(0,eA.nf)(n),className:a().dynamic([["5801f317c1c8f7d3",[s,i.colors.backgroundOverlay,g.Ay.spacing.xxxxs,r.borderRadius.regular,r.borderRadius.regular,P.Ay.center()]]])+" "+(d()("briefing-compact-header",e)||""),children:(0,o.jsx)(ev.A,{shouldHidePresentationModeUI:"hybrid"===l})}),(0,o.jsx)(a(),{id:"5801f317c1c8f7d3",dynamic:[s,i.colors.backgroundOverlay,g.Ay.spacing.xxxxs,r.borderRadius.regular,r.borderRadius.regular,P.Ay.center()],children:`.briefing-compact-header.__jsx-style-dynamic-selector{width:fit-content;color:${s};background-color:${i.colors.backgroundOverlay};padding:${g.Ay.spacing.xxxxs};border-radius:0 0 ${r.borderRadius.regular} ${r.borderRadius.regular};${P.Ay.center()}}`})]})}),eS=e=>{let{hasSpaceForHeader:t}=(0,ef.N)(),[s,i]=(0,n.useState)(!0),{classificationBanner:r}=(0,F.k3)(),l=(0,n.useRef)(null),p=(0,n.useRef)(null),c=r??"0",h=(0,n.useCallback)(eg()(()=>{m(),l.current=setTimeout(()=>{y()},3e3)},20),[]);(0,n.useEffect)(()=>{if(!t)return window.addEventListener("mousemove",h),()=>{window.removeEventListener("mousemove",h)}},[t,h]);let m=()=>{i(!0),l.current&&clearTimeout(l.current)},y=()=>{i(!1)};if((0,ex.C)({triggerKey:["Enter"],hasPrimaryModifier:!0,hasShiftKey:!0,on:e=>{e.preventDefault(),h(),(0,eA.Su)(p.current)}}),t)return null;let u="briefing-conditional-compact-header",{className:g,styles:x}={styles:(0,o.jsx)(a(),{id:"847f5dd1e50e16d9",dynamic:[u,10,c,u,u,c,u],children:`.${u}.__jsx-style-dynamic-selector{z-index:10;position:fixed;top:0;left:50%;transform:translatex(-50%)translatey(${c})}.${u}.animate.__jsx-style-dynamic-selector{transition:transform.6s;transform:translatex(-50%)translatey(-100%)}.${u}.animate.__jsx-style-dynamic-selector:is(.show,:focus-within){transform:translatex(-50%)translatey(${c})}@media(prefers-reduced-motion:reduce){.${u}.__jsx-style-dynamic-selector{transition:none}}`}),className:a().dynamic([["847f5dd1e50e16d9",[u,10,c,u,u,c,u]]])};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eI,{className:d()(g,u,{show:s,animate:!e.shouldPreventAnimations}),ref:p}),x]})};var eT=s(653045),eD=s(503843),ej=s(328864),ek=s(650557),eC=s(52457);let eL={phone:{landscape:{width:734,height:388,fileName:"frame-phone-landscape.png"},portrait:{width:388,height:734,fileName:"frame-phone.png"}},tablet:{landscape:{width:1100,height:782,fileName:"frame-tablet-landscape.png"},portrait:{width:782,height:1100,fileName:"frame-tablet.png"}},desktop:{landscape:{width:1370,height:878,fileName:"frame-desktop.png"},portrait:{width:1370,height:878,fileName:"frame-desktop.png"}}};class eM extends n.Component{constructor(e){super(e),this.margins={top:65,bottom:130,side:65},this.scaleWrapper=(0,n.createRef)(),this.scaledPreview=(0,n.createRef)(),this.previewIframe=(0,n.createRef)(),this.handleResize=()=>{this.forceUpdate()},this.findTransformScale=()=>{let e=this.scaleWrapper.current?.getBoundingClientRect();if(!e)return 1;let t=eL[this.props.device];return+Math.min(Math.min(Math.round(e.height-this.margins.top-this.margins.bottom)/t.portrait.height,1),Math.min(Math.round(e.width-2*this.margins.side)/t.landscape.width,1)).toFixed(2)},this.findTopPosition=e=>{if(!this.scaleWrapper.current||!this.scaledPreview.current)return 0;let t=Math.round(this.scaleWrapper.current.getBoundingClientRect().height),s=Math.round(e||this.scaledPreview.current.getBoundingClientRect().height);return this.margins.top+(t-s-this.margins.top-this.margins.bottom)/2},this.handleResizeDebouncedly=(0,ek.sg)(this.handleResize,200)}componentDidMount(){this.forceUpdate(),this.scrollWindowToTop(),window.addEventListener("resize",this.handleResizeDebouncedly)}componentDidUpdate(e){(e.device!==this.props.device||e.orientation!==this.props.orientation)&&this.scrollIframeToTop()}componentWillUnmount(){window.removeEventListener("resize",this.handleResizeDebouncedly)}render(){let e=eL[this.props.device][this.props.orientation],t=this.findTransformScale(),s=Math.round(e.height*t),i=this.findTopPosition(s),r=this.props.query?(0,eC.lK)(this.props.query):void 0,l=void 0===this.props.selectedItemId?r?`./embedded-preview?${r}`:"./embedded-preview":r?`./embedded-preview?item=${this.props.selectedItemId}&${r}`:`./embedded-preview?item=${this.props.selectedItemId}`;return(0,o.jsx)(n.Fragment,{children:(0,o.jsxs)("div",{ref:this.scaleWrapper,className:a().dynamic([["57b2303620ecb728",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,i,g.Ay.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" "+`scale-wrapper ${this.props.device} ${this.props.orientation}`,children:[(0,o.jsx)("div",{className:a().dynamic([["57b2303620ecb728",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,i,g.Ay.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" scaled",children:(0,o.jsx)("div",{ref:this.scaledPreview,className:a().dynamic([["57b2303620ecb728",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,i,g.Ay.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" center-horizontally scaled-preview",children:(0,o.jsxs)("div",{className:a().dynamic([["57b2303620ecb728",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,i,g.Ay.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" preview-container specified-dimensions",children:[(0,o.jsx)("img",{src:`${this.props.config.BASE_URL}/static/storymaps-website-common/images/device-preview/${e.fileName}`,alt:this.props.intl.formatMessage({id:"component.preview.chromeAlt"}),loading:"lazy",className:a().dynamic([["57b2303620ecb728",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,i,g.Ay.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" device-chrome"}),(0,o.jsx)("iframe",{src:l,ref:this.previewIframe,loading:"lazy",className:a().dynamic([["57b2303620ecb728",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,i,g.Ay.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])})]})})}),"desktop"!==this.props.device&&!0!==this.props.disallowLandscape&&(0,o.jsx)("div",{className:a().dynamic([["57b2303620ecb728",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,i,g.Ay.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" rotate-button-wrapper center-horizontally",children:(0,o.jsx)(el.Ay,{type:"single-icon",iconSize:24,onClick:this.props.onOrientationChange,visuallyHiddenLabel:this.props.intl.formatMessage({id:"component.preview.rotateLabel"}),children:(0,o.jsx)(B.A,{path:"M21.323 8.616l-4.94-4.94a1.251 1.251 0 0 0-1.767 0l-10.94 10.94a1.251 1.251 0 0 0 0 1.768l4.94 4.94a1.25 1.25 0 0 0 1.768 0l10.94-10.94a1.251 1.251 0 0 0 0-1.768zM14 5.707L19.293 11 11.5 18.793 6.207 13.5zm-4.323 14.91a.25.25 0 0 1-.354 0l-1.47-1.47.5-.5-2-2-.5.5-1.47-1.47a.25.25 0 0 1 0-.354L5.5 14.207l5.293 5.293zm10.94-10.94l-.617.616L14.707 5l.616-.616a.25.25 0 0 1 .354 0l4.94 4.94a.25.25 0 0 1 0 .353zm1.394 6.265V18a3.003 3.003 0 0 1-3 3h-3.292l1.635 1.634-.707.707-2.848-2.847 2.848-2.848.707.707L15.707 20h3.304a2.002 2.002 0 0 0 2-2v-2.058zM4 9H3V7a3.003 3.003 0 0 1 3-3h3.293L7.646 2.354l.707-.707 2.848 2.847L8.354 7.34l-.707-.707L9.28 5H6a2.002 2.002 0 0 0-2 2z"})})}),(0,o.jsx)(a(),{id:"57b2303620ecb728",dynamic:[this.props.websiteDesign.theme.colors.backgroundSecondary,t,i,g.Ay.spacing.lg,this.props.device,this.props.orientation,e.width,e.height],children:`.center-horizontally.__jsx-style-dynamic-selector{position:absolute;left:50%;transform:translatex(-50%);top:0}.scale-wrapper.__jsx-style-dynamic-selector{height:100vh;position:relative;background-color:${this.props.websiteDesign.theme.colors.backgroundSecondary}}.scaled.__jsx-style-dynamic-selector{transform:scale(${t});position:relative;top:${i}px}.preview-container.__jsx-style-dynamic-selector{margin:0 auto}.rotate-button-wrapper.__jsx-style-dynamic-selector{top:auto;bottom:${g.Ay.spacing.lg}}iframe.__jsx-style-dynamic-selector{position:absolute;box-sizing:border-box;border-radius:8px}.${this.props.device}.${this.props.orientation}.__jsx-style-dynamic-selector .specified-dimensions.__jsx-style-dynamic-selector{width:${e.width}px;height:${e.height}px}.phone.portrait.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{top:4.8%;left:1.9%;height:90.4%;width:96.3%}.phone.landscape.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{left:4.8%;top:1.9%;width:90.4%;height:96.3%}.tablet.portrait.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{top:4.6%;left:1.4%;height:90.6%;width:97.2%}.tablet.landscape.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{left:4.6%;top:1.4%;width:90.6%;height:97.2%}.desktop.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{top:6.4%;left:1.8%;width:96.5%;height:90.9%}`})]})})}scrollWindowToTop(){let e=window?.document?.documentElement;e&&(e.scrollTop=0)}scrollIframeToTop(){try{let e=this.previewIframe?.current?.contentWindow?.document?.documentElement;e&&this.scrollToTop(e)}catch(e){}}scrollToTop(e){if(e.scrollTop>0){let t=e.clientHeight?Math.round(e.clientHeight/2):300;setTimeout(()=>{e.scrollBy(0,-1*t),this.scrollToTop(e)},10)}}}let e_=(0,y.NV)((0,p.Ay)((0,k.az)(eM)));var e$=s(188704),eE=s(350041),eP=s(1801),ez=s(824439),eB=s(469121),eR=s(105559),eH=s(860374),eN=s(70017);class eO extends n.Component{static{this.defaultProps={device:"fullscreen",onDeviceChange:()=>{}}}render(){let e=this.props.intl.formatMessage({id:"component.preview.controls.close"});return(0,o.jsxs)("div",{className:a().dynamic([["91b14c877317f6aa",[P.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),P.Ay.shadow.md(),this.props.websiteDesign.theme.colors.surfaceDefault,this.props.websiteDesign.productVariables.borderRadius.mid]]])+" preview-controls",children:[this.deviceSpecs.map(e=>{if(e.isUnavailable)return;let t=e.value,s=this.props.intl.formatMessage({id:e.stringId}),i=()=>{this.onPreviewChangeWrapper(t)};return(0,o.jsx)(eR.g,{"aria-pressed":this.props.device===t,iconProps:e.iconProps,buttonId:e.stringId,onClick:i,tooltipContent:s},`${t}-frag`)}),(0,o.jsx)(eH.A,{}),(0,o.jsxs)(eB.m_,{children:[(0,o.jsx)(eN.i,{routeDef:(0,W.WU)({route:"builder",itemId:this.props.storyItem.itemId,itemType:this.props.storyItem.type,isTemplate:this.props.storyItem.isTemplate}),children:(0,o.jsx)(eB.k$,{autoARIADescribedByEnabled:!1,children:(0,o.jsx)(el.Ay,{type:"single-icon",className:"edit-link",visuallyHiddenLabel:e,children:(0,o.jsx)(B.A,{path:E.s,size:16})})})}),(0,o.jsx)(eB.ZI,{children:e})]}),(0,o.jsx)(a(),{id:"91b14c877317f6aa",dynamic:[P.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),P.Ay.shadow.md(),this.props.websiteDesign.theme.colors.surfaceDefault,this.props.websiteDesign.productVariables.borderRadius.mid],children:`.preview-controls.__jsx-style-dynamic-selector{${P.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"})};${P.Ay.shadow.md()}
            background-color: ${this.props.websiteDesign.theme.colors.surfaceDefault};border-radius:${this.props.websiteDesign.productVariables.borderRadius.mid};color:inherit}`})]})}constructor(...e){super(...e),this.deviceSpecs=[{value:"phone",iconProps:{path:eE.o},stringId:"component.previewHeader.device.phone",isUnavailable:this.props.storyItem.type===b.z.Briefing},{value:"tablet",iconProps:{path:"M15 14a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1zm-.25-10a.25.25 0 0 1 .25.25v8.5a.25.25 0 0 1-.25.25H14V4zM13 4v9H4V4zM1 9h1V8H1V4.25A.25.25 0 0 1 1.25 4H3v9H1.25a.25.25 0 0 1-.25-.25z",shouldFlipRTL:!0},stringId:"component.previewHeader.device.tablet",isUnavailable:this.props.storyItem.type===b.z.Briefing},{value:"desktop",iconProps:{path:eP.G},stringId:"component.previewHeader.device.desktop"},{value:"fullscreen",iconProps:{path:ez.U,shouldFlipRTL:!0},stringId:"component.previewHeader.device.full"}],this.onPreviewChangeWrapper=e=>{this.props.onDeviceChange&&this.props.onDeviceChange(e)}}}let eU=(0,y.NV)((0,k.az)((0,p.Ay)((0,F.Cm)((0,er.e)(eO)))));var eV=s(877098),eW=s(697203),eF=s(307557),eG=s(501411),eq=s(301972),eK=s(850415),eZ=s(128456);let eY=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("link",{rel:"preconnect",href:"https://www.arcgis.com"}),(0,o.jsx)("link",{rel:"preconnect",href:"https://js.arcgis.com"}),(0,o.jsx)("link",{rel:"preconnect",href:"https://static.arcgis.com"})]}),eJ=e=>{let t,s,i,r,a,l,p,c,d,{publishedDate:h,host:y,config:u,authorTrackingConfig:g}=e,x=(0,X.ck)();if(x.type===b.z.Theme)throw Error("StoryItemMetaTags do not currently support theme items");let A=g&&(0,v.me)(g).isValidAnalyticsConfig,f=u.ESRI_MARKETING_ANALYTICS&&((x.itemDetails.typeKeywords??[]).includes(eK.AV)||"string"==typeof x.itemDetails.orgId&&u.ESRI_MARKETING_ANALYTICS.orgIds.includes(x.itemDetails.orgId))?u.ESRI_MARKETING_ANALYTICS.scriptSrc:void 0,{requestNextRouteChangeWithFullPageLoad:w,getUrlFromRouteDef:I}=(0,W.dA)();(0,n.useEffect)(()=>{(A||void 0!==f)&&w()},[A,f,w]);let S=(0,eV.A)(!0),T=`${y?"https://"+y:(0,eW.I)({siteUrl:u.SITE_URL,isComponentMounted:S,isScriptEmbedded:u.IS_SCRIPT_EMBEDDED})}`,D=(0,eF.Jc)({portalHost:u.PORTAL_HOST,itemDetails:x.itemDetails,fallbackUrl:`${T}${(0,eZ.b9)(u.BASE_URL)}`,shouldIgnoreDPR:!0,returnOriginalAspectRatio:!0}),k=(0,j.T)(x.itemDetails),C=k?.metaProperties?.title?(0,eC.wr)(k?.metaProperties?.title):(0,eC.wr)(e.title),L=(0,eC.wr)(e.author),M=k?.metaProperties?.description?(0,eC.wr)(k?.metaProperties?.description):x.itemDetails.snippet?(0,eC.wr)(x.itemDetails.snippet):x.itemDetails.description?(0,eC.wr)(x.itemDetails.description):"",_=I((0,W.WU)({route:"viewer",itemType:x.type,itemId:x.itemDetails.id,isTemplate:x.isTemplate})),$=(0,eG.Y)({typeKeywords:x.itemDetails.typeKeywords,typeKeywordId:eq.aE})||!(0,eF.e5)({itemDetails:x.itemDetails,isTemplate:x.isTemplate})||e.isStandaloneBlock;return(0,o.jsxs)(m(),{children:[(0,o.jsx)("title",{children:C},"title"),(0,o.jsx)("meta",{name:"author",content:L},"author"),(0,o.jsx)("meta",{property:"article:published_time",content:h.toISOString()},"publishedDate"),(0,o.jsx)("link",{rel:"canonical",href:_}),(0,o.jsx)("link",{rel:"alternate",type:"application/json+oembed",href:`${T}/oembed?url=${encodeURIComponent(_)}&format=json`,title:C}),(0,o.jsx)("link",{rel:"alternate",type:"text/xml+oembed",href:`${T}/oembed?url=${encodeURIComponent(_)}&format=xml`,title:C}),(0,o.jsx)(eY,{}),(void 0!==x.itemDetails.robots||$)&&(0,o.jsx)("meta",{name:"robots",content:$?"noindex, nofollow":"function"==typeof x.itemDetails.robots?.join?x.itemDetails.robots.join(","):"noindex, nofollow"}),(0,o.jsx)("meta",{property:"og:title",content:C},"og:title"),(0,o.jsx)("meta",{property:"og:description",content:M},"og:description"),(0,o.jsx)("meta",{property:"og:url",content:_},"og:url"),(0,o.jsx)("meta",{property:"og:image",content:D},"og:image"),(0,o.jsx)("meta",{name:"twitter:creator",content:L},"twitter:creator"),(0,o.jsx)("meta",{name:"twitter:url",content:_},"twitter:url"),(0,o.jsx)("meta",{name:"twitter:title",content:C},"twitter:title"),(0,o.jsx)("meta",{name:"twitter:description",content:M},"twitter:description"),(0,o.jsx)("meta",{name:"twitter:image",content:D},"twitter:image"),(0,o.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:`${(t=_,s=D,i=new Date(x.itemDetails.created).toISOString(),r=h.toISOString(),a=L,l=C,p=M,c=T,d=u,JSON.stringify({"@context":"https://schema.org","@type":"NewsArticle",mainEntityOfPage:{"@type":"WebPage","@id":t},headline:`${l}`,image:[`${s}`],datePublished:`${i}`,dateModified:`${r}`,author:{"@type":"Person",name:`${a}`},publisher:{"@type":"Organization",name:"Esri",logo:{"@type":"ImageObject",url:`${c}${d.BASE_URL}/static/images/logo.png`}},description:`${p}`}))}`}}),f&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("script",{dangerouslySetInnerHTML:{__html:`(function(){window.dataLayer = Object.assign({}, window.dataLayer, {pageTitle: 'StoryMap: ${x.itemDetails.owner}: ' + document.title, pageName: 'StoryMap: ' + document.title, pageType: 'StoryMaps', pageSubType: 'StoryMap', domain: window.location.host, language: 'en',countryCode: 'us'});})()`}}),(0,o.jsx)("script",{src:f,async:!0})]})]})};var eQ=s(807932),eX=s(739962);let e0=()=>{let{updateAppOffsetValues:e,top:t,classificationBanner:s}=(0,F.k3)(),i=s?(0,eC.U)(s):0,o=(0,eC.U)(t),r=(0,eC.U)(eX.q8);return(0,n.useEffect)(()=>{o!==r+i&&e({top:{storyHeader:(0,eC.U)(eX.q8)}})},[]),null},e1=({shouldShowHeader:e,children:t,shouldPreventKeyboardEvents:s})=>{let{hasSpaceForHeader:i,toggleHeaderSpace:r}=(0,ef.N)();return(0,o.jsxs)(o.Fragment,{children:[e&&(0,o.jsx)(e0,{}),!s&&(0,o.jsx)(es.A,{triggerKey:"\\",isMeta:!0,on:r}),i&&t]})};var e5=s(710377),e2=s(950590),e8=s(951300);let e3=e=>(0,o.jsx)(el.Ay,{type:"secondary",className:e.className,onClick:()=>window.history.back(),children:(0,o.jsx)(l.A,{id:"page.error.back"})});class e7 extends n.PureComponent{render(){return(0,o.jsx)(el.Ay,{className:this.props.className,onClick:this.print,children:(0,o.jsx)(l.A,{id:"common.print"})})}constructor(...e){super(...e),this.print=()=>{I.A.trackEvent(I.A.Category.Viewer,I.A.Action.Viewer_Print),window.print()}}}let e4=()=>{let e={styles:(0,o.jsx)(a(),{id:"f721344522b46961",dynamic:[g.Ay.spacing.xs],children:`.side-margins.__jsx-style-dynamic-selector{margin:0 ${g.Ay.spacing.xs}}`}),className:a().dynamic([["f721344522b46961",[g.Ay.spacing.xs]]])};return(0,o.jsxs)("div",{className:a().dynamic([["e93460b6fa4d69e",[g.Ay.spacing.lg,g.Ay.spacing.xs,x.Gs.RTL]]])+" basic-wrapper",children:[(0,o.jsxs)("div",{className:a().dynamic([["e93460b6fa4d69e",[g.Ay.spacing.lg,g.Ay.spacing.xs,x.Gs.RTL]]])+" print-wrapper",children:[(0,o.jsx)(e7,{className:`side-margins ${e.className}`}),(0,o.jsx)(e3,{className:`side-margins ${e.className}`})]}),(0,o.jsx)(a(),{id:"e93460b6fa4d69e",dynamic:[g.Ay.spacing.lg,g.Ay.spacing.xs,x.Gs.RTL],children:`.basic-wrapper.__jsx-style-dynamic-selector{position:relative;display:none}@media screen{.basic-wrapper.__jsx-style-dynamic-selector{display:block}}.print-wrapper.__jsx-style-dynamic-selector{position:absolute;top:${g.Ay.spacing.lg};left:100%;display:grid;grid-gap:${g.Ay.spacing.xs}}${x.Gs.RTL} .print-wrapper.__jsx-style-dynamic-selector{left:unset;right:100%}`}),e.styles]})},e6=e=>{let{isScriptEmbed:t}=e,{vertical:s,classificationBanner:i}=(0,F.k3)(),r=d()("viewer-main",eK.TL,e.mainClassName,{"device-preview":"preview"===e.mode}),n={styles:(0,o.jsx)(a(),{id:"10f7075e96ec6d8d",dynamic:[i],children:`.with-offset.__jsx-style-dynamic-selector{padding:${i} 0}`}),className:a().dynamic([["10f7075e96ec6d8d",[i]]])};return(0,o.jsxs)(e8.A,{className:d()({"inline-story":e.isInlineStory,"with-offset":!!i},n.className),children:[e.viewerHeader,e.printMode&&(0,o.jsx)(e4,{}),(0,o.jsx)(t?"div":"main",{className:a().dynamic([["381d6f0d3207c896",[g.Ay.print.pageWidthLetter,g.Ay.print.backgroundColor]],["e40f99612134426a",[s,s]]])+" "+(r||""),children:e.children}),(0,o.jsx)(a(),{id:"e40f99612134426a",dynamic:[s,s],children:`.viewer-main.__jsx-style-dynamic-selector{min-height:calc(100vh - ${s})}.viewer-main.device-preview.__jsx-style-dynamic-selector{min-height:0}body.print .viewer-main.__jsx-style-dynamic-selector{min-height:0}@supports(height:1svh){.viewer-main.__jsx-style-dynamic-selector{min-height:calc(100svh - ${s})}}`}),(0,o.jsx)(a(),{id:"381d6f0d3207c896",dynamic:[g.Ay.print.pageWidthLetter,g.Ay.print.backgroundColor],children:`body.print{width:${g.Ay.print.pageWidthLetter};margin:0 auto}body.print .page-container{background:${g.Ay.print.backgroundColor}}`}),n.styles]})};var e9=s(956700);class te extends n.PureComponent{constructor(e){super(e),this.setAuthorTrackerFromConfig=()=>{this.trackingDetails=this.getAuthorTrackerDetails(),this.trackingType=this.trackingDetails?.type;let e=(0,v.me)(this.trackingDetails);if(void 0!==this.trackingDetails&&!this.state.hasActiveAuthorTracker&&e.isValidAnalyticsConfig){v.IO.setup({portal:this.props.portalSelfResponse,isPortal:this.props.isPortal,authorTrackingConfig:this.trackingDetails});try{v.IO.instance.startupTracker(),this.setState({hasActiveAuthorTracker:!0})}catch(e){this.setState({hasActiveAuthorTracker:!1}),console.error("Error starting author tracker",e)}}},this.handleEmbeddedCollectionUpdate=e=>{let{currentIndex:t,isItemViewTransitionComplete:s,isCoverShowing:i}=e.detail;this.props.collectionDisplay.updateCollectionDisplay({currentIndex:t,isItemViewTransitionComplete:s,isCoverShowing:i})},this.getItemViewerHeader=()=>{let e=this.props.storyItem.getItemPublishStatus(),t=this.props.storyItem.itemSharingLevel,s=this.props.storyItem.itemDetails&&"embedded-preview"!==this.props.mode&&"preview"!==this.props.mode&&!this.props.storyItem.itemDetails.origin&&("admin"===this.props.storyItem.itemDetails.itemControl||"update"===this.props.storyItem.itemDetails.itemControl),i={...this.props,storyId:this.props.storyItem.itemId,title:this.state.title,isOrgItem:this.props.storyItem.isOrgItem,itemOwner:this.props.storyItem.itemOwner,storyType:this.props.itemType,topOffset:this.props.appOffset.classificationBanner,publishStatus:e,sharingLevel:t,canEdit:s,areSocialIconsHidden:this.state.areSocialIconsHidden,appLogo:this.props.appLogo,shouldShowSkipLink:!0,hashForSkipLink:this.state.hashForSkipLink,shouldShowLogoInHeader:this.props.storyContext.storyLogo?.shouldShowLogoInHeader??!0},r=this.getIsBlurredViewerBackground();switch(this.props.itemType){case b.z.Story:return(0,o.jsx)(eQ.A,{...i,canShowItemTitle:this.props.canShowItemTitle,onTitleClicked:this.resetItemBlock});case b.z.Collection:return(0,o.jsx)(ej.A,{...i,canShowItemTitle:this.props.canShowItemTitle,getItemHref:this.getItemHref,isScriptEmbed:this.props.isScriptEmbed});case b.z.Briefing:return(0,o.jsx)(eT.A,{...i,onTitleClicked:this.resetItemBlock,shouldDisablePresentationModeUI:this.getIsEmbeddedPreview()});case b.z.Frame:return r?(0,o.jsx)(y.Pl,{defaultTheme:"light",isStoryThemeDependent:!1,children:(0,o.jsx)(e$.A,{...i,isBlurredBackground:r,onTitleClicked:this.resetItemBlock})}):(0,o.jsx)(e$.A,{...i,onTitleClicked:this.resetItemBlock});default:throw Error("No story item type provided")}},this.getItemHref=e=>this.itemBlock?.do("getItemUrl",e),this.renderBanner=e=>(0,o.jsxs)(n.Fragment,{children:["fullscreen-preview"===e&&!this.props.isViewportMinWidth("large")&&(0,o.jsx)("div",{className:a().dynamic([["bc448fd46b6cca15",[this.props.appOffset.top]]])+" draft-preview-banner",children:(0,o.jsx)(u.A,{size:"small",title:(0,o.jsx)(l.A,{id:"common.banner.viewDraftStory.mobile"}),backgroundColor:this.props.websiteDesign.theme.colors.interactiveDefault,textColor:this.props.websiteDesign.theme.colors.labelReverse,closeBtnColor:this.props.websiteDesign.theme.colors.labelReverse,closeButtonLabel:this.props.intl.formatMessage({id:"common.close"})})}),(0,o.jsx)(a(),{id:"bc448fd46b6cca15",dynamic:[this.props.appOffset.top],children:`.draft-preview-banner.__jsx-style-dynamic-selector{position:absolute;top:${this.props.appOffset.top};left:0;width:100%;z-index:1}body.print .draft-preview-banner.__jsx-style-dynamic-selector{display:none}body.frame{-webkit-touch-callout:none;-webkit-user-select:none}`})]}),this.renderBody=e=>"preview"===e&&"fullscreen"!==this.state.previewDevice?(0,o.jsx)(e_,{device:this.state.previewDevice,orientation:this.state.previewOrientation,onOrientationChange:this.onOrientationChange,disallowLandscape:this.props.itemType===b.z.Frame,query:this.props.query,...this.props.itemType===b.z.Collection&&{selectedItemId:(this.state.collectionItemIndex+1).toString()}}):(0,o.jsxs)(o.Fragment,{children:[this.state.ui,this.renderBanner(e)]}),this.onOrientationChange=()=>{let e="landscape"===this.state.previewOrientation?"portrait":"landscape";this.setState({previewOrientation:e})},this.onPreviewDeviceChange=e=>{if(e){let t={previewDevice:e};"phone"===e?(Object.assign(t,{previewOrientation:"portrait"}),I.A.trackEvent(I.A.Category.Preview,I.A.Action.Preview_Device_Phone)):"tablet"===e&&(Object.assign(t,{previewOrientation:"landscape"}),I.A.trackEvent(I.A.Category.Preview,I.A.Action.Preview_Device_Tablet)),this.setState(t,()=>{this.props.onPreviewDeviceChange?.(e)})}},this.resetItemBlock=()=>{this.itemBlock?.do("reset")},this.getAuthorTrackerDetails=()=>{let e=!this.props.environment.isPortal||this.props.featureDecisions.canHaveAuthorAnalytics,t=(0,e5.Oh)(this.props.storyItem,e,this.props.printMode);if("view"===this.props.mode&&t&&(!(t&&t.consentMessage)||this.state.hasUserAcceptedAuthorAnalytics))return t},this.onAuthorAnalyticsConsentMessageAccepted=()=>{this.setState({isAuthorAnalyticsConsentMessageShowing:!1,hasUserAcceptedAuthorAnalytics:!0},()=>{this.setAuthorTrackerFromConfig()})},this.onAuthorAnalyticsConsentMessageDismissed=()=>{this.setState({isAuthorAnalyticsConsentMessageShowing:!1})},this.jumpToBlock=()=>{let e=100*(this.props.itemType!==b.z.Briefing),t=0,s=0,i=document.body.offsetHeight,o=setInterval(async()=>{s++;let e=document.body.offsetHeight;e===i?t++:(i=e,t=0),(t>=30||s>=100)&&(clearInterval(o),(0,e5.FL)(),this.state.linkedBlockId&&await this.itemBlock?.do("jumpToBlock",this.state.linkedBlockId))},e)},this.getHasDocumentLoaded=()=>"undefined"!=typeof document&&"complete"===document.readyState,this.onWindowLoaded=()=>{this.setState({hasPageLoaded:!0}),this.state.linkedBlockId&&this.state.hasItemRendered&&this.jumpToBlock()},this.getIsEmbeddedPreview=()=>(0,S.nq)()&&"embedded-preview"===this.props.mode,this.getIsBlurredViewerBackground=()=>{if(this.props.itemType===b.z.Frame){let e=this.renderData?.itemData,t=e?.root,s=e?.nodes,i=s?.[t||""];return i?.data?.viewerBackground==="blurred"}return!1},this.getBylineFromStoryItemData=(e,t,s)=>{if(t===b.z.Story){let t=e.nodes[e.root];if(!t.children)return"";for(let s of t.children){let t=e.nodes[s];if(t&&"storycover"===t.type)return t.data?.byline}}else if(t===b.z.Collection){for(let t of Object.values(e.nodes))if(t&&"collection-cover"===t.type)return t.data?.byline}else if(t===b.z.Frame){for(let t of Object.values(e.nodes))if(t&&"storycover"===t.type)return t.data?.byline}else if(t===b.z.Briefing){for(let t of Object.values(e.nodes))if(t&&"storycover"===t.type)return t.data?.byline}else throw Error("only call getBylineFromStoryItemData for gemini items");return""},this.state={ui:void 0,viewerHeaderTheme:this.props.itemType===b.z.Briefing?"dark":"light",title:this.props.storyItem.itemDetails?.title||"",areSocialIconsHidden:!1,previewDevice:"fullscreen",previewOrientation:"landscape",isMounted:!1,isAuthorAnalyticsConsentMessageShowing:!1,hasUserAcceptedAuthorAnalytics:!1,hasActiveAuthorTracker:!1,hasPageLoaded:this.getHasDocumentLoaded(),linkedBlockId:this.props.canJumpToLinkedBlock&&!this.props.printMode?(0,e5.QI)():void 0,hasItemRendered:!1,collectionItemIndex:this.props.initialCollectionItemIndex??-1};let t=this.props.scriptEmbedConfig?.standalone??[].concat(this.props.query?.standalone)[0];this.renderData=function({standaloneId:e,itemData:t}){if(!e||!(0,_.f7)(t))return{isStandaloneBlock:!1,itemData:t};let s=t.nodes[e];if(!s||$.includes(s.type))return{isStandaloneBlock:!1,itemData:t};let i=t.root,o=t.nodes[i];if("story"!==o.type)return{isStandaloneBlock:!1,itemData:t};let r=(0,M.r8)(),a={type:"standalone",data:{originalRootId:i,storyTheme:o.data&&"storyTheme"in o.data?o.data.storyTheme:void 0},children:[e]},n=structuredClone(t);return n.root=r,n.nodes[r]=a,{isStandaloneBlock:!0,itemData:n}}({standaloneId:t,itemData:"view"===this.props.mode?this.props.storyItem.itemData:this.props.storyItem.itemDraftData})}componentDidMount(){(0,e9.m)(this),this.setState({isMounted:!0}),this.state.linkedBlockId&&(this.getHasDocumentLoaded()?this.onWindowLoaded():window.addEventListener("load",this.onWindowLoaded)),this.props.itemType===b.z.Collection&&document.addEventListener("embeddedCollectionUpdate",this.handleEmbeddedCollectionUpdate);let e=this.renderData?.itemData,t={shouldHideItemActions:this.props.storyItem.itemId===e2.p8||this.props.shouldHideItemActions||!!this.props.printMode||"view"!==this.props.mode,printMode:this.props.printMode,viewMode:this.props.mode,lazy:!this.props.printMode,storyItem:this.props.storyItem,config:this.props.config,featureDecisions:this.props.featureDecisions,environment:this.props.environment,toast:this.props.toast,portalSelfResponse:this.props.portalSelfResponse,authManager:this.props.authManager,getIntl:()=>this.props.intl,getAppOffset:()=>this.props.appOffset,getStoryOffset:()=>this.props.storyOffsetContext,getStoryDesignContext:()=>this.props.storyDesign,getStoryRouting:()=>this.props.storyRouting,getStoryContext:()=>this.props.storyContext,root:{initialThemeItemInfo:this.props.initialThemeItemInfo},scriptEmbedConfig:this.props.scriptEmbedConfig,canCopyLinks:!this.props.isInlineStory&&!(0,S.Fj)(),...this.props.itemType===b.z.Collection&&{lazy:!1,getCollectionContextDisplay:()=>this.props.collectionDisplay,getCollectionContextData:()=>this.props.collectionData,isShowingCollectionItem:!this.props.collectionDisplay.isCoverShowing}};window.location.search.includes("lazy=false")&&Object.assign(t,{lazy:!1}),Object.assign(t,{lab:this.props.config.ENABLE_LAB_FEATURES&&(0,T.DN)(window.location.href)}),document&&document.body&&this.props.printMode&&document.body.classList.add("print",this.props.printMode),document&&document.body&&this.props.itemType===b.z.Frame&&document.body.classList.add("frame"),(0,L.jq)({data:e,mode:"viewer",context:{...t},registry:(0,V.G)({featureDecisions:this.props.featureDecisions,includeLabItems:!!t.lab})}).then(e=>{this.itemBlock=e;let t=this.itemBlock.do("getStoryTheme");return this.setState({viewerHeaderTheme:this.props.itemType===b.z.Briefing?"dark":t.websiteThemeFlavor,title:this.itemBlock.do("getCoverTitle"),areSocialIconsHidden:this.itemBlock.do("isSocialIconsHidden"),coverData:this.itemBlock.do("getCoverData"),hashForSkipLink:this.itemBlock.do("getSkipLinkHash")}),this.itemBlock.render()}).then(e=>{this.setAuthorTrackerFromConfig(),this.setState({ui:e,hasItemRendered:!0,isAuthorAnalyticsConsentMessageShowing:"view"===this.props.mode&&!this.props.printMode&&!!this.itemBlock?.do("getAuthorAnalytics")&&!!(this.itemBlock?.do("getAuthorAnalytics")).consentMessage}),this.state.linkedBlockId&&this.state.hasPageLoaded&&this.jumpToBlock()}).then(()=>{if("view"===this.props.mode&&this.props.storyItem.itemId!==e2.p8)try{(0,G.eD)({itemId:this.props.storyItem.itemId,portalHost:this.props.config.PORTAL_HOST,authManager:this.props.authManager,customTracker:this.props.itemViewTracker})}catch(e){}}).catch(async e=>{I.A.trackEvent(I.A.Category.Viewer,I.A.Action.Story_Render_Error,this.props.storyItem.itemId),await (0,D.Cp)(this.props.config,e),this.props.redirectOnLoadError?.({config:this.props.config,signInUrl:this.props.signInUrl,authManager:this.props.authManager})})}componentDidUpdate(e){if(this.props.itemType===b.z.Collection){let{currentIndex:t,isCoverShowing:s,isItemViewTransitionComplete:i}=e.collectionDisplay,{currentIndex:o,isCoverShowing:r,isItemViewTransitionComplete:a}=this.props.collectionDisplay,n=s!==r||t!==o,l=n||i!==a;if(this.getIsEmbeddedPreview()&&l){let e=new CustomEvent("embeddedCollectionUpdate",{detail:{currentIndex:o,isItemViewTransitionComplete:a,isCoverShowing:r}});try{window.parent?.document.dispatchEvent(e)}catch{}return}if(n){let e=this.props.storyItem.itemDetails.id,t=`${this.props.config.BASE_URL}/collections/${e}`;if("preview"===this.props.mode&&(t=`${t}/preview`),!r){let e=new URLSearchParams(window.location.search);e.set("item",`${o+1}`),t=`${t}?${e}`}this.props.isScriptEmbed||window.history.replaceState(null,"",t)}if("fullscreen"!==this.state.previewDevice)return;let p=r?-1:o;this.state.collectionItemIndex!==p&&this.setState({collectionItemIndex:p})}}componentWillUnmount(){this.setState({isMounted:!1}),window.removeEventListener("load",this.onWindowLoaded),document.removeEventListener("embeddedCollectionUpdate",this.handleEmbeddedCollectionUpdate)}render(){let e=this.itemBlock?.do("getMetaSettings"),t=(0,e5.UK)({itemType:this.props.itemType,isTemplate:this.props.storyItem.isTemplate,title:e?.title??this.state.title,formatMessage:this.props.intl.formatMessage}),s=this.props.mode;"preview"!==this.props.mode||"fullscreen"!==this.state.previewDevice&&this.props.isViewportMinWidth("large")||(s="fullscreen-preview");let i=!this.props.printMode&&("preview"===this.props.mode||"fullscreen-preview"===this.props.mode&&this.props.isViewportMinWidth("large")),r=this.props.shouldShowViewerHeader&&("preview"!==this.props.mode||"preview"===this.props.mode&&"fullscreen"===this.state.previewDevice),l=null,p="hybrid"===this.props.environment.openMode;if(r){let e=this.getItemViewerHeader();l=(0,o.jsx)(y.Pl,{defaultTheme:this.state.viewerHeaderTheme,isStoryThemeDependent:!0,children:this.props.itemType===b.z.Briefing?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e1,{shouldShowHeader:!0,shouldPreventKeyboardEvents:p,children:e}),(this.props.isViewportMinWidth("medium")||p)&&(0,o.jsx)(eS,{shouldPreventAnimations:p})]}):e})}let c=(0,j.T)(this.props.storyItem.itemDetails),h=c?.metaProperties?.description||this.props.storyItem.itemDetails.snippet,u={styles:(0,o.jsx)(a(),{id:"762fa5f60e611069",dynamic:[this.props.websiteDesign.theme.colors.backgroundPrimary],children:`.briefing-viewer-main.__jsx-style-dynamic-selector{background-color:${this.props.websiteDesign.theme.colors.backgroundPrimary}}`}),className:a().dynamic([["762fa5f60e611069",[this.props.websiteDesign.theme.colors.backgroundPrimary]]])},A=this.props.itemType===b.z.Story||this.props.itemType===b.z.Briefing||this.props.itemType===b.z.Frame,f=this.state.hasItemRendered&&!this.props.printMode&&this.props.postStoryContent,w=this.props.multiLang?.supportedLanguages?.filter(e=>!e.hasDetachedFromSource)??[],v=!!(h||w.length>1);return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(eD.A,{children:t}),v&&(0,o.jsxs)(m(),{children:[h&&(0,o.jsx)("meta",{name:"description",content:h,className:a().dynamic([["122e01fb8592db07",[this.props.appOffset.bottom,g.Ay.spacing.md,g.Ay.spacing.custom("7.2rem"),x.Gs.RTL,g.Ay.spacing.custom("7.2rem")]]])},"description"),w.length>1&&w.map(e=>(0,o.jsx)("link",{rel:"alternate",hrefLang:e.culture,href:`${this.props.config.SITE_URL}/${(0,J.i)(this.props.storyItem.type,!1)}/${e.id}`,className:a().dynamic([["122e01fb8592db07",[this.props.appOffset.bottom,g.Ay.spacing.md,g.Ay.spacing.custom("7.2rem"),x.Gs.RTL,g.Ay.spacing.custom("7.2rem")]]])},`translation-${e.id}`))]}),A&&(0,o.jsx)(N.A,{}),(0,o.jsx)(X.Ay.Provider,{value:this.props.storyItem,children:(0,o.jsx)(et.Tt,{initialQuery:this.props.query,children:(0,o.jsx)(Z.BN,{children:(0,o.jsxs)(K.No,{children:[this.props.storyItem.itemDetails&&this.props.storyItem&&this.props.storyItem.itemData&&this.props.storyItem.getItemPublishDate()&&(0,o.jsx)(eJ,{title:t,author:this.getBylineFromStoryItemData(this.props.storyItem.itemData,this.props.itemType,this.props.itemOwnerFullName),publishedDate:this.props.storyItem.getItemPublishDate(),host:this.props.host,config:this.props.config,authorTrackingConfig:this.getAuthorTrackerDetails(),isStandaloneBlock:this.renderData?.isStandaloneBlock}),this.state.isAuthorAnalyticsConsentMessageShowing&&(0,o.jsx)(H,{onAllowClicked:this.onAuthorAnalyticsConsentMessageAccepted,onDismissClicked:this.onAuthorAnalyticsConsentMessageDismissed,message:this.itemBlock?.do("getAuthorAnalytics")?.consentMessage??""}),(0,o.jsx)(O.S,{itemId:this.props.storyItem.itemId,position:"top"}),(0,o.jsxs)(e6,{...this.props,viewerHeader:l,mode:s,printMode:this.props.printMode,isInlineStory:this.props.isInlineStory,isScriptEmbed:this.props.isScriptEmbed,mainClassName:this.props.itemType===b.z.Briefing?d()(u.className,"briefing-viewer-main"):void 0,children:[(0,o.jsx)(ey,{onItemEndReached:this.resetItemBlock,collectionBlock:this.props.itemType===b.z.Collection?this.itemBlock:void 0}),i&&this.props.isViewportMinWidth("large")&&this.state.isMounted&&(0,o.jsx)("div",{className:a().dynamic([["122e01fb8592db07",[this.props.appOffset.bottom,g.Ay.spacing.md,g.Ay.spacing.custom("7.2rem"),x.Gs.RTL,g.Ay.spacing.custom("7.2rem")]]])+" preview-controls-container",children:(0,o.jsx)(y.Pl,{defaultTheme:"light",children:(0,o.jsx)(eU,{onDeviceChange:this.onPreviewDeviceChange,device:this.state.previewDevice})})}),this.renderBody(s),this.props.footerBanner,f&&(0,o.jsx)(y.Pl,{defaultTheme:this.state.viewerHeaderTheme,isStoryThemeDependent:!0,children:this.props.postStoryContent})]}),(0,o.jsx)(O.S,{itemId:this.props.storyItem.itemId,position:"bottom"})]})})})}),(0,o.jsx)(a(),{id:"122e01fb8592db07",dynamic:[this.props.appOffset.bottom,g.Ay.spacing.md,g.Ay.spacing.custom("7.2rem"),x.Gs.RTL,g.Ay.spacing.custom("7.2rem")],children:`.preview-controls-container.__jsx-style-dynamic-selector{position:fixed;z-index:98;bottom:calc(${this.props.appOffset.bottom} + ${g.Ay.spacing.md});right:${g.Ay.spacing.custom("7.2rem")}}${x.Gs.RTL} .preview-controls-container.__jsx-style-dynamic-selector{right:unset;left:${g.Ay.spacing.custom("7.2rem")}}`}),this.props.itemType===b.z.Briefing&&u.styles]})}}let tt=(0,U.ng)((0,y.NV)((0,k.az)((0,p.Ay)((0,W.PX)((0,ee.N)((0,C.Fo)((0,F.Cm)((0,A.hB)((0,f.Ay)((0,w.S9)((0,Q.o)((0,q.B)((0,Y.ZK)(te))))))))))))))},616053:(e,t,s)=>{s.d(t,{k:()=>i});let i="M2 5v22h28V5zm1 21V6h9v20zm26 0H13V6h16zM4 17h5v1H4zm0-3h7v1H4z"},619867:(e,t,s)=>{s.d(t,{O8:()=>_,V:()=>L});var i=s(811579),o=s(199065),r=s(345081),a=s(674133),n=s(256449),l=s(183581),p=s(539423),c=s(950590),d=s(273356),h=s(581797),m=s(695505),y=s(111970),u=s(777011),g=s(362420),x=s(650557);let A=async(e,t,s)=>{let i,o=await (0,x.O$)(e,{maxRetries:1,promiseArguments:e=>{var s;return t(void(s=0))},onError:e=>{console.error({err:e,debugInfo:s});let t=[g.ZJ.APP_BLOCKED_FOR_ORG,g.ZJ.ITEM_ACCESS_UNAUTHORIZED,g.ZJ.ITEM_NONEXISTENT_OR_INACCESSIBLE,g.ZJ.SUBSCRIPTION_DISABLED,g.ZJ.OWNER_SUBSCRIPTION_DISABLED,g.ZJ.SUBSCRIPTION_CANCELED,g.ZJ.INVALID_TOKEN,"HTTP 403"];return!(e instanceof Error&&(e instanceof u.Lf&&t.includes(e.code)||"string"==typeof e.message&&/items\/[a-zA-Z0-9]{32}\/data/.test(e.message)&&"invalid-json"===e.type))}});return clearTimeout(i),o};var f=s(631363),w=s(671012),v=s(501411),b=s(307557),I=s(724875),S=s(697203),T=s(467066),D=s(192354),j=s(488560);let k=e=>{if(void 0!==e){if(e.req?.url)return e.req.url;if("pathname"in e)return e.asPath??`${e.pathname}${(0,m.X2)(e.query)}`}},C=e=>{let{itemDetails:t,expectedItemType:s,url:r}=e,a=(0,y.WE)(t),n=r&&r.includes("/templates")&&r.includes(t.id);if(!(0,i.Z3)(t,s)||a&&!n||!a&&n){let e=(0,y.EN)(t);throw new o.D({type:"item-not-supported-on-route",itemType:e})}},L=async e=>{let{id:t,authManager:s,config:i,ctx:o,itemType:p,translationOptions:c,shouldRedirect:d}=e;if(!t)throw Error(`no ${p} id`);if(void 0!==o){let{res:e}=o;e?.setHeader?.("Vary","Cookie")}let h={itemId:t,authManager:s,portalHost:i.PORTAL_HOST,timeStamp:"string"==typeof o?.query.ts?o.query.ts:void 0},m=!1,u={...h,type:p,config:i};try{let[g,x]=await Promise.all([A(r.A.fetchItemDetails,e=>[{...h,signal:e}],{function:"StoryItemViewer.fetchItemDetails",id:t,itemType:p}),A(r.A.fetchPublishedItemData,e=>[{...u,signal:e}],{function:"StoryItemViewer.fetchPublishedItemData",id:t,itemType:p})]);m=(0,y.WE)(g),C({itemDetails:g,expectedItemType:p,url:k(o)||window?.location.pathname});let I=(0,a.$N)(x),S=c?.locale?(0,f.KN)(c.locale,c.supportedLanguages,c.fallbackLanguage):void 0;S&&(0,w.T)(g)?.translations?.[S]&&c?.autoTranslationTypeKeyword&&(0,v.Y)({typeKeywords:g.typeKeywords,typeKeywordId:c.autoTranslationTypeKeyword})?(I=I?c.locale:void 0,x=await A(r.A.fetchPublishedItemData,e=>[{...u,language:S,signal:e}],{function:"fetchPublishedItemData",id:t,itemType:p})):S&&c?.locale&&I?.startsWith(S)&&(I=c.locale);let D=await A(n.xT,e=>[{storyItemData:x,authManager:s,portalHost:i.PORTAL_HOST,signal:e}],{function:"fetchThemeItemInfo",id:t,itemType:p});if((0,b.m5)(g)||(0,y.tc)(g)&&("admin"===g.itemControl||"update"===g.itemControl)){let e=(0,l.i)(p,m),s=`/${e}/edit?id=${t}`,r=`${i.BASE_URL}/${e}/${t}/edit`;return d&&(0,T.w)({ctx:o,href:s,asPath:r}),{redirect:{asPath:r},success:!1}}if("public"!==g.access&&s)try{if(await A(j.r,e=>[{authManager:s,config:i,signal:e}],{function:"getUserAuthorization",id:t,itemType:p})==="user-unauthorized")throw Error("user-unauthorized")}catch(e){if(d)throw e;return{redirect:{asPath:`${i.BASE_URL}/error`},success:!1}}let L="";if(void 0!==o){let{req:t,res:s}=o;s&&"function"==typeof s.setHeader&&("public"===g.access?s.setHeader("Cache-Control",`public, max-age=${e.skipCache?0:i.CACHE_MAX_AGE}`):s.setHeader("Cache-Control",`private, max-age=${e.skipCache?0:i.NON_PUBLIC_CACHE_MAX_AGE}`)),L=t?.headers.host||""}return{id:t,itemDetails:(0,y.st)(g),publishedData:x,host:L,initialThemeItemInfo:D,...I?{pageLocale:I}:{},success:!0}}catch(t){return M(t,{...e,isTemplate:m})}},M=(e,t)=>{let{id:s,authManager:i,config:r,ctx:a,signInUrl:n,itemType:c,isTemplate:d,shouldRedirect:h}=t;if(e&&e.code)try{return(0,D.w)({ctx:a,authManager:i,signInUrl:n,error:e,config:r}),{redirect:{asPath:""},error:e,success:!1}}catch(e){throw new o.D(e)}if("string"==typeof e.message&&e.message.search(`items/${s}/data`)>=0&&"invalid-json"===e.type){let t=c===I.z.Collection?"edit":"preview",i=(0,l.i)(c,d);return h&&(0,T.w)({ctx:a,href:`/${i}/${t}?id=${s}`,asPath:`${r.BASE_URL}/${i}/${s}/${t}`}),{redirect:{asPath:`${r.BASE_URL}/${i}/${s}/${t}`},error:e,success:!1}}if("string"==typeof e.message&&"user-unauthorized"===e.message)return h&&(0,T.w)({ctx:a,href:`/error?errType=unsupported-account&itemType=${c}`,asPath:`${r.BASE_URL}/error?errType=unsupported-account&itemType=${c}`}),{redirect:{asPath:`${r.BASE_URL}/error?errType=unsupported-account&itemType=${c}`},error:e,success:!1};{if("string"!=typeof e.message||"item-not-supported-on-route"!==e.message||!s)return h&&(0,T.w)({ctx:a,href:`/error?itemType=${c}`,asPath:`${r.BASE_URL}/error?itemType=${c}`}),{redirect:{asPath:`${r.BASE_URL}/error?itemType=${c}`},error:e,success:!1};let o=t.convertRoute({routeDef:(0,p.WU)({route:"viewer",itemType:e.itemType,isTemplate:d,itemId:s}),featureDecisions:{canAccessExternalUrls:!1},config:r,authManager:i}),n="error?errType=item-not-supported-on-route`",l=`${r.BASE_URL}/${n}`;return h&&(0,T.w)({ctx:a,href:E(o.href,n),asPath:o.as||l}),{redirect:{asPath:o.as||l},success:!1}}},_=async e=>{let{id:t,authManager:s,config:i,ctx:r,signInUrl:h,itemType:m,shouldRedirect:u}=e;if(!t)throw Error(`no ${m} id`);if(t===c.p8)return $(e);let g={itemId:t,authManager:s,portalHost:i.PORTAL_HOST},x=!1;try{let e=await d.Ay.fetchItemDetails(g);x=(0,y.WE)(e);let p=(0,l.i)(m,x);if(C({itemDetails:e,expectedItemType:m,url:k(r)||window?.location.pathname}),e.origin)return u&&(0,T.w)({ctx:r,href:`/${p}/${t}`,asPath:`${i.BASE_URL}/${p}/${t}`}),{success:!1,redirect:{asPath:`${i.BASE_URL}/${p}/${t}`}};if("update"===e.itemControl||"admin"===e.itemControl){if((0,b.m5)(e)||(0,y.tc)(e))return u&&(0,T.w)({ctx:r,href:`/${p}/edit?id=${t}`,asPath:`${i.BASE_URL}/${p}/${t}/edit`}),{success:!1,redirect:{asPath:`${i.BASE_URL}/${p}/${t}/edit`}};if(void 0!==r){let{res:e}=r;e&&"function"==typeof e.setHeader&&e.setHeader("Cache-Control","max-age=0, private, must-revalidate")}let{itemData:o}=await d.Ay.fetchItemDraftData({itemDetails:e,type:m,authManager:s,portalHost:i.PORTAL_HOST,config:i}),l=await (0,n.xT)({storyItemData:o,authManager:s,portalHost:i.PORTAL_HOST}),c=(0,a.$N)(o);return{success:!0,id:t,itemDetails:e,draftData:o,initialThemeItemInfo:l,pageLocale:c}}throw new o.D({type:"story-privileges-preview",itemType:m})}catch(a){if("string"==typeof a.message&&"item-not-supported-on-route"===a.message&&t){let o=e.convertRoute({routeDef:(0,p.WU)({route:"preview",itemType:a.itemType,itemId:t,isTemplate:x}),featureDecisions:{canAccessExternalUrls:!1},config:i,authManager:s}),n="error?errType=item-not-supported-on-route`",l=`${i.BASE_URL}/${n}`;return u&&(0,T.w)({ctx:r,href:E(o.href,n),asPath:o.as||l}),{redirect:{asPath:o.as||l},success:!1}}if(a instanceof o.D)throw new o.D(a);return(0,D.w)({ctx:r,authManager:s,signInUrl:h,error:a,config:i}),{redirect:{asPath:""},error:a,success:!1}}},$=({config:e,formatMessage:t})=>({success:!0,...(0,c.bS)({formatMessage:t,baseUrl:e.BASE_URL,siteUrl:(0,S.I)({siteUrl:e.SITE_URL,isComponentMounted:!0,isScriptEmbedded:e.IS_SCRIPT_EMBEDDED}),productName:e.PRODUCT_NAME,baseThemeId:(0,h.Le)(e.INCLUDED_STORY_THEMES)}),initialThemeItemInfo:{}}),E=(e,t)=>"object"==typeof e&&e.pathname?e.pathname:"string"==typeof e?e:t},642124:(e,t,s)=>{s.d(t,{KM:()=>A,Rs:()=>f,bj:()=>g,pp:()=>y});var i=s(455729),o=s(947),r=s(674133),a=s(345081),n=s(273356),l=s(199065),p=s(950590),c=s(877098),d=s(890200),h=s(619867),m=s(131594);let y=e=>{(0,i.useEffect)(()=>{(0,r.wq)(e)},[e])},u=e=>{let t=(0,i.useRef)();return{initialThemeItemInfo:e??t.current,setInitialThemeItemInfo:(0,i.useCallback)(e=>{t.current=e},[])}},g=({itemType:e,isOrgItem:t,isEmbedded:s,headerQuery:o})=>{let r=(0,c.A)(!0),a=(0,i.useMemo)(()=>(({itemType:e,isOrgItem:t,isEmbedded:s,headerQuery:i})=>!t||!!s&&"briefing"===e&&"false"!==i||(!s||"true"===i||""===i)&&"false"!==i)({itemType:e,isOrgItem:t,isEmbedded:s,headerQuery:o}),[t,s,e,o]);return!!r&&a},x=(0,d.N)(),A=(e,t)=>{let{id:s,itemDetails:o,publishedData:r,setLocaleFromPage:n,query:p,config:c,signInUrl:d,authManager:y,storyMapUserPrivileges:g}=t,[A,f]=(0,i.useState)(!x),w=(({itemType:e,version:t,viewerMode:s,id:o,itemDetails:r,versionedItemData:n,authManager:l,storyMapUserPrivileges:p,config:c})=>{let d=new a.A({type:e,authManager:l,version:t,getStoryMapUserPrivileges:()=>p,viewerMode:s,config:c});return o&&(d.itemId=o),r&&(d.itemDetails=r),n&&(d.itemData=n),(0,i.useRef)(d).current})({itemType:e,version:"published",viewerMode:"view",authManager:y,storyMapUserPrivileges:g,config:c,...A?{id:s,itemDetails:o,versionedItemData:r}:{}}),{initialThemeItemInfo:v,setInitialThemeItemInfo:b}=u(t.initialThemeItemInfo);return(0,i.useEffect)(()=>{let t=!1;return(async()=>{try{if(!A){let s=await (0,h.V)({id:p?.id,config:c,signInUrl:d,authManager:y,itemType:e,shouldRedirect:!0,convertRoute:m.N});if(t||!s.success)return;let{id:i,itemDetails:o,publishedData:r,pageLocale:a,initialThemeItemInfo:l}=s;w.itemId=i,w.itemDetails=o,w.itemData=r,b(l),await n({pageLocale:a}),f(!0)}}catch(e){f(()=>{if(e instanceof l.D)throw new l.D(e);throw Error(e)})}})(),()=>{t=!0}},[w,b,A,e,n,p,c,d,y]),{isReady:A,storyItem:w,initialThemeItemInfo:v}},f=(e,t)=>{let{id:s,itemDetails:r,draftData:a,locale:c,setLocaleFromPage:d,query:y,config:g,signInUrl:A,authManager:f,storyMapUserPrivileges:w}=t,{formatMessage:v}=(0,o.A)(),b=y?.id===p.p8||s===p.p8,[I,S]=(0,i.useState)(!(x||b)),T=(({itemType:e,version:t,viewerMode:s,id:o,itemDetails:r,versionedItemData:a,authManager:l,storyMapUserPrivileges:p,config:c})=>{let d=new n.Ay({type:e,authManager:l,version:t,getStoryMapUserPrivileges:()=>p,viewerMode:s,config:c});return o&&(d.itemId=o),r&&(d.itemDetails=r),a&&(d.itemDraftData=a),(0,i.useRef)(d).current})({itemType:e,version:"draft",viewerMode:"preview",authManager:f,storyMapUserPrivileges:w,config:g,...I?{id:s,itemDetails:r,versionedItemData:a}:{}}),{initialThemeItemInfo:D,setInitialThemeItemInfo:j}=u(t.initialThemeItemInfo);return(0,i.useEffect)(()=>{let t=!1;return(async()=>{try{if(!I){b&&await d({pageLocale:c});let s=await (0,h.O8)({id:y?.id,config:g,signInUrl:A,authManager:f,formatMessage:v,itemType:e,shouldRedirect:!0,convertRoute:m.N});if(t||!s.success)return;let{id:i,itemDetails:o,draftData:r,pageLocale:a,initialThemeItemInfo:n}=s;T.itemId=i,T.itemDetails=o,T.itemDraftData=r,j(n),b||await d({pageLocale:a}),S(!0)}}catch(e){S(()=>{if(e instanceof l.D)throw new l.D(e);throw Error(e)})}})(),()=>{t=!0}},[T,j,I,e,c,d,y,g,A,f,b,v]),{isReady:I,storyItem:T,initialThemeItemInfo:D,mode:y?.mode||"preview"}}},657764:(e,t,s)=>{s.d(t,{v:()=>i});let i="M8 15H3.5A2.502 2.502 0 0 1 1 12.5v-9A2.502 2.502 0 0 1 3.5 1h9A2.502 2.502 0 0 1 15 3.5V8h-1V3.5A1.502 1.502 0 0 0 12.5 2h-9A1.502 1.502 0 0 0 2 3.5v9A1.502 1.502 0 0 0 3.5 14H8zm-.038-4.811a9.77 9.77 0 0 1-3.766 1.796l-.242-.97a8.816 8.816 0 0 0 3.282-1.532A9.264 9.264 0 0 1 4.888 5H4V4h3.279l-.544-.544.707-.707L8.692 4H12v1h-.914A9.836 9.836 0 0 1 9.78 8.152a3.853 3.853 0 0 0-1.82 2.037zm.032-1.383A8.167 8.167 0 0 0 10.058 5H5.922a8.18 8.18 0 0 0 2.072 3.806zM23 20.447v-8.894A2.525 2.525 0 0 0 20.484 9h-8.931A2.556 2.556 0 0 0 9 11.553v8.894A2.556 2.556 0 0 0 11.553 23h8.894A2.556 2.556 0 0 0 23 20.447zM20.484 10A1.517 1.517 0 0 1 22 11.516v8.968A1.517 1.517 0 0 1 20.484 22h-8.968A1.517 1.517 0 0 1 10 20.484v-8.968A1.517 1.517 0 0 1 11.516 10zm-2.086 8h-4.796l-1.159 2.23-.886-.46L16 11.215l4.443 8.555-.886.46zm-.52-1L16 13.385 14.122 17z"},673530:(e,t,s)=>{s.d(t,{$:()=>r,C:()=>o});var i=s(455729);let o=(0,i.createContext)({collectionData:{titlesArray:[],updateCollectionData:()=>{}},collectionDisplay:{currentIndex:-1,isCoverShowing:!0,isItemViewTransitionComplete:!1,updateCollectionDisplay:()=>{}}}),r=()=>(0,i.useContext)(o)},698769:(e,t,s)=>{s.d(t,{M:()=>i});let i="M22.719 12A10.719 10.719 0 0 1 1.28 12h.838a9.916 9.916 0 1 0 1.373-5H8v1H2V2h1v4.2A10.71 10.71 0 0 1 22.719 12z"},740179:(e,t,s)=>{s.d(t,{c:()=>i});let i="M11 7V6h3v9H3V6h3v1H4v7h9V7zM6.74 4L8 2.739V11h1V2.705L10.295 4l.324.324.707-.707L8.517.807l-2.809 2.81.707.707z"},766919:(e,t,s)=>{s.d(t,{e:()=>i});let i="M8.717 8.959L9 8c-1.03-.305-2.194-.84-3.084-1.558A9.587 9.587 0 0 0 8 3h1V2H5.572L4.198.552l-.724.687.721.761H1v1h1c.404 1.038 1.232 2.33 2.418 3.477C3.577 7.174 2.227 7.695 1.009 8l.242.97c1.429-.357 2.957-.986 3.924-1.818 1 .823 2.317 1.445 3.542 1.807zM3.087 3H6.94a8.668 8.668 0 0 1-1.775 2.777C4.208 4.864 3.5 3.855 3.088 3zM14.02 15.995l.91-.416L11 7.5l-4 8.072.904.428.899-2h4.306l.91 1.995zM9.275 13L11 9.5l1.652 3.5H9.275z"},814995:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(406029),o=s(571711),r=s.n(o),a=s(455729),n=s(332988),l=s.n(n),p=s(337139);let c=(0,a.memo)(({isShowing:e,toggleStoryOverlay:t,isInvisible:s})=>{let{backgroundColor:o}=(0,p.cu)(),[n,c]=(0,a.useState)(e);(0,a.useEffect)(()=>{e&&c(!0)},[e]);let d=async()=>{t&&(window.scrollTo(0,0),await t(!1),e||c(!1))};return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)("div",{onAnimationEnd:d,className:r().dynamic([["a4e57e736170039a",[o,+!s]]])+" "+(l()("story-overlay",{"fade-in":!s&&e,"fade-out":!s&&!e})||"")}),(0,i.jsx)(r(),{id:"a4e57e736170039a",dynamic:[o,+!s],children:`.story-overlay.__jsx-style-dynamic-selector{background-color:${o};position:fixed;width:100%;height:100%;top:0;left:0;right:0;bottom:0;z-index:2;opacity:${+!s};pointer-events:none}.fade-in.__jsx-style-dynamic-selector{animation:fadeIn 250ms ease-in}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}.fade-out.__jsx-style-dynamic-selector{animation:fadeOut 250ms ease-out}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}`})]})})},824439:(e,t,s)=>{s.d(t,{U:()=>i});let i="M0 1v14h16V1zm1 13V5h4v9zm14 0H6V5h9zm0-10h-1V3h-1v1H1V2h14z"}}]);